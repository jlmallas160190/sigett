<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <h:panelGrid id="datosProyecto" styleClass="panelgrid" rowClasses="rowpanelgrid" columnClasses="col-sm-3,col-sm-8,col-sm-1" columns="3">
            <h:outputLabel value="#{msg['lbl.tema']}:" for="tema" />
            <p:inputTextarea id="tema" required="true"  rendered="#{sessionProyecto.renderedInicio}" 
                             requiredMessage="#{msg['lbl.tema']} #{msg['lbl.obligatorio']}" value="#{sessionProyecto.temaProyecto.temaId.nombre}">
                <p:ajax event="change" update="msmTema"/>
            </p:inputTextarea>
            <h:outputText rendered="#{!sessionProyecto.renderedInicio}" value="#{sessionProyecto.temaProyecto.temaId.nombre}"/>
            <p:message id="msmTema" display="icon" for="tema"/>

            <h:outputLabel  value="#{msg['lbl.fecha']} #{msg['lbl.inicio']}"/>
            <p:calendar id="fechaInicio" navigator="true" pattern="dd/MM/yyyy"  rendered="#{sessionProyecto.renderedPertinente}" 
                        locale="es" placeholder="#{msg['lbl.fecha']} #{msg['lbl.inicio']}" required="true"  
                        requiredMessage="#{msg['lbl.fecha']} #{msg['lbl.inicio']} #{msg['lbl.obligatorio']}" 
                        title="#{msg['lbl.fecha']} #{msg['lbl.inicio']}" value="#{sessionProyecto.cronograma.fechaInicio}">
                <f:param  name="2" value="agregar-cronograma"/>
                <p:ajax event="dateSelect" update="fechaInicio,fechaProrroga,duracion,:contenido:msm,
                        :contenido:tabViewDatosProyecto:tblAutores" process="fechaInicio"
                        listener="#{cronogramaController.editarCronograma()}"/>     
            </p:calendar>
            <h:outputText rendered="#{!sessionProyecto.renderedPertinente}" value="#{sessionProyecto.cronograma.fechaInicio}">
                <f:convertDateTime pattern="EEEEE dd MMMMM yyyy"/>
            </h:outputText>
            <p:message id="msmFechaInicio" display="icon" for="fechaInicio"/>

            <h:outputLabel value="#{msg['lbl.fechaCulminaci贸n']}"/>
            <p:calendar  pattern="dd/MM/yyyy" navigator="true" rendered="#{sessionProyecto.renderedPertinente}" id="fechaFin" locale="es"  
                         placeholder="#{msg['lbl.fechaCulminaci贸n']}" title="#{msg['lbl.fechaCulminaci贸n']}"  required="true" 
                         requiredMessage="#{msg['lbl.fechaCulminaci贸n']} #{msg['lbl.obligatorio']}" value="#{sessionProyecto.cronograma.fechaFin}">
                <f:param  name="2" value="agregar-cronograma"/>
                <p:ajax event="dateSelect" update=":contenido:msm,fechaInicio,fechaFin,fechaProrroga,duracion,,:contenido:msm,
                        ,:contenido:tabViewDatosProyecto:tblAutores" 
                        onstart="PF('dlgLoading').show()" oncomplete="PF('dlgLoading').hide()" process="fechaInicio,fechaFin"
                        listener="#{cronogramaController.editarCronograma()}"/> 
            </p:calendar>
            <h:outputText value="#{sessionProyecto.cronograma.fechaFin}" rendered="#{!sessionProyecto.renderedPertinente}">
                <f:convertDateTime pattern="EEEEE dd MMMMM yyyy"/>
            </h:outputText>
            <p:message id="msmFechaFin" display="icon" for="fechaFin"/>

            <h:outputLabel rendered="#{administrarProrrogas.tieneProrroga}" value="#{msg['lbl.fecha']} #{msg['lbl.prorroga']}"/>
            <h:outputText id="fechaProrroga" rendered="#{administrarProrrogas.tieneProrroga}" value="#{sessionProyecto.cronograma.fechaProrroga}">
                <f:convertDateTime pattern="EEEEE dd MMMMM yyyy"/>
            </h:outputText>
            <p:message  id="msmFechaProrroga" rendered="#{administrarProrrogas.tieneProrroga}" display="icon" for="fechaProrroga"/>

            <h:outputLabel value="#{msg['lbl.tipo']}:" />
            <p:selectOneMenu id="tipoProyecto" rendered="#{sessionProyecto.renderedInicio}" value="#{sessionProyecto.tipo}" 
                             requiredMessage="#{msg['lbl.tipo']} #{msg['lbl.obligatorio']}.">
                <f:selectItem itemLabel="#{msg['lbl.seleccionar']}"/>
                <f:selectItems value="#{sessionProyecto.tipos}"/>
                <p:ajax event="change" process="tipoProyecto" listener="#{proyectoController.seleccionarTipoProyecto()}"
                        update="tipoProyecto,:contenido:msm"/>
            </p:selectOneMenu>
            <h:outputText rendered="#{!sessionProyecto.renderedInicio}" value="#{sessionProyecto.tipo}"/>
            <h:inputHidden/>
            <h:outputLabel value="#{msg['lbl.categoria']}:" for="catProyecto"/>
            <p:selectOneMenu id="catProyecto" rendered="#{sessionProyecto.renderedInicio}" value="#{sessionProyecto.catalogo}"  
                             requiredMessage="#{msg['lbl.categoria']} #{msg['lbl.obligatorio']}.">
                <f:selectItems value="#{sessionProyecto.categorias}"/>
            </p:selectOneMenu>
            <h:outputText value="#{sessionProyecto.catalogo}" rendered="#{!sessionProyecto.renderedInicio}"/>
            <h:inputHidden/>
            <h:outputLabel value="#{msg['lbl.duracion']}:"/>
            <h:outputLabel id="duracion" styleClass="informacion" value="#{sessionProyecto.cronograma.duracion}"/>
            <h:inputHidden/>
            <h:outputLabel value="#{msg['lbl.avance']}:"/>
            <p:progressBar id="avance"  labelTemplate="#{sessionProyecto.cronograma.avance}%" value="#{sessionProyecto.cronograma.avance}"/>
            <h:inputHidden/>
            <h:outputLabel value="#{msg['lbl.faltante']}:"/>
            <p:progressBar id="faltante" labelTemplate="#{sessionProyecto.cronograma.faltante}%" value="#{sessionProyecto.cronograma.faltante}"/>
        </h:panelGrid>
    </body>

</html>

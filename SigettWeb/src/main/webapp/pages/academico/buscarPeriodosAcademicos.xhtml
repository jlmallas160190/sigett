<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../../principalAdmin.xhtml">
            <ui:define name="title">#{msg['lbl.periodosAcademicos']}</ui:define>
            <ui:define name="content">
                <p:messages id="msm"/>
                <p:panel header="#{msg['lbl.periodosAcademicos']}">
                    <p:dataTable id="tblPeriodos" value="#{sessionPeriodoAcademico.periodoAcademicos}" var="item" rows="20" paginator="true"
                                 rowIndexVar="rowIx"  rowKey="#{item.id}" selectionMode="single" selection="#{item}" 
                                 rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'even-row' : 'odd-row'}" 
                                 emptyMessage="#{msg['lbl.table.empty']}"
                                 filteredValue="#{sessionPeriodoAcademico.periodoAcademicosFilter}"
                                 >
                        <p:column filterBy="#{item.idSga}" sortBy="#{item.idSga}">
                            <f:facet name="header">
                                <h:outputText value="Id Sga"/>
                            </f:facet>
                            <h:outputText value="#{item.idSga}"/>
                        </p:column>
                        <p:column  rendered="#{administrarPeriodosAcademicos.renderedEditar}">
                            <f:facet name="header">
                                <h:outputText value="#{msg['lbl.fecha']} #{msg['lbl.inicio']}"/>
                            </f:facet>
                            <p:commandLink value="#{administrarConfiguraciones.date(item.fechaInicio)}" update="@form" action="#{administrarPeriodosAcademicos.editar(item,sessionUsuario.usuario)}">
                                <f:param value="editar" name="1"/>
                            </p:commandLink>
                        </p:column>
                        <p:column  rendered="#{administrarPeriodosAcademicos.renderedNoEditar}">
                            <f:facet name="header">
                                <h:outputText value="#{msg['lbl.fecha']} #{msg['lbl.inicio']}"/>
                            </f:facet>
                            <h:outputText value="#{administrarConfiguraciones.date(item.fechaInicio)}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{msg['lbl.fecha']} #{msg['lbl.fin']}"/>
                            </f:facet>
                            <h:outputText value="#{administrarConfiguraciones.date(item.fechaFin)}"/>
                        </p:column>
                    </p:dataTable>
                    <f:facet name="footer">
                        <h:panelGrid columns="2">
                            <p:commandButton value="#{msg['lbl.crear']}" rendered="#{administrarPeriodosAcademicos.renderedCrear}"  onstart="PF('dlgLoading').show();" oncomplete="PF('dlgLoading').hide()" update="msm" icon="ui-icon-disk" action="#{administrarPeriodosAcademicos.crear(sessionUsuario.usuario)}"/>    
                            <p:commandButton onstart="PF('dlgLoading').show();" rendered="#{administrarPeriodosAcademicos.renderedSincronizar}" oncomplete="PF('dlgLoading').hide()" value="#{msg['lbl.sincronizar']}" update="tblPeriodos,msm" icon="ui-icon-refresh" action="#{administrarPeriodosAcademicos.sgawsPeriodosAcademicos(sessionUsuario.usuario)}"/>
                        </h:panelGrid>
                    </f:facet>
                </p:panel>
            </ui:define>
        </ui:composition>

    </body>
</html>
